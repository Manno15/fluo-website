<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" integrity="sha384-h21C2fcDk/eFsW9sC9h0dhokq5pDinLNklTKoxIZRUn3+hvmgQSffLLQ4G4l2eEr" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/fluo.css">
    <link rel="canonical" href="https://fluo.apache.org//release-process/">
    <link rel="icon" type="image/png" href="/resources/favicon.png">
    
    <title>Release Process | Apache Fluo</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- Place your <script> tags here. -->

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55360307-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>
  <body style="padding-top: 100px">
    <nav id="fluo-nav" class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <div class="navbar-toggle-wrapper visible-xs">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".js-navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <a href="/" class="navbar-brand"><img id="fluo-img" height="40px" src="/resources/fluo-logo-dark.png" alt="Apache Fluo"></a>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse" style="margin-top: 20px">
          <ul class="navbar-nav nav">
            <li><a href="/release/">Releases</a></li>
            <li><a href="/tour/">Tour</a></li>
            <li><a href="/docs/">Docs</a></li>
            <li><a href="/api/">API</a></li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/getinvolved/">Get Involved</a></li>
                <li><a href="/news/">News Archive</a></li>
                <li><a href="/people/">People</a></li>
                <li><a href="/related-projects/">Related Projects</a></li>
                <li><a href="/poweredby/">Powered By</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Contributing<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/how-to-contribute/">How To Contribute</a></li>
                <li><a href="/release-process/">Release Process</a></li>
              </ul>
            </li>
          </ul>
          <ul class="navbar-nav nav navbar-right">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="https://www.apache.org">Apache Homepage</a></li>
                <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship</i></a></li>
                <li><a href="https://www.apache.org/security">Security</a></li>
                <li><a href="https://www.apache.org/foundation/thanks">Thanks</a></li>
                <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
          <div class="col-sm-12">
            <div class="page">

  <header class="post-header">
    <h2 class="post-title">Release Process</h2>
  </header>

  <article id="page-content">
    <div class="alert alert-danger" role="alert">Please note - These instructions are for releasing Fluo before it became an ASF project.  After the first Apache release, they will be updated to reflect how to release Apache Fluo on ASF infrastructure</div>

<h3 id="initial-setup">Initial Setup</h3>

<p>Before you can release Fluo or Fluo Recipes, you will need to set up a GPG client, create a <a href="https://issues.sonatype.org/">sonatype account</a>, and have another Fluo committer request to give you deployment access for the Fluo project on sonatype.  Once you have a sonatype account, you should add your account details to your Maven settings.xml in the following format:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;servers&gt;</span>
  <span class="nt">&lt;server&gt;</span>
    <span class="nt">&lt;id&gt;</span>sonatype-nexus-staging<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;username&gt;</span>USER<span class="nt">&lt;/username&gt;</span>
    <span class="nt">&lt;password&gt;</span>PASS<span class="nt">&lt;/password&gt;</span>
  <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;server&gt;</span>
    <span class="nt">&lt;id&gt;</span>sonatype-nexus-snapshots<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;username&gt;</span>USER<span class="nt">&lt;/username&gt;</span>
    <span class="nt">&lt;password&gt;</span>PASS<span class="nt">&lt;/password&gt;</span>
  <span class="nt">&lt;/server&gt;</span>
<span class="nt">&lt;/servers&gt;</span>
</code></pre>
</div>

<p>See this <a href="http://central.sonatype.org/pages/apache-maven.html">documentation</a> for more information on setting up your environment.</p>

<h3 id="release-fluo">Release Fluo</h3>

<p>Before starting the release process below, the following tasks should be complete:</p>

<ul>
  <li>Create release notes for project website using GitHub issues.</li>
  <li>Perform testing and document results</li>
  <li>
    <p>Start a gpg-agent to cache your gpg key to avoid entering your passphrase multiple times.</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code>gpg-agent --daemon --use-standard-socket
</code></pre>
    </div>
  </li>
</ul>

<p>Next, repeat the steps below until a good release candidate (RC) is found:</p>

<ol>
  <li>
    <p>Branch master (or the current snapshot) and call the branch <code class="highlighter-rouge">&lt;releaseVersion&gt;-RC</code></p>
  </li>
  <li>
    <p>Except in Maven POMs (which will be updated by the next step), change any version references in docs and code from <code class="highlighter-rouge">&lt;releaseVersion&gt;-SNAPSHOT</code> to <code class="highlighter-rouge">&lt;releaseVersion&gt;</code>.  Commit changes to branch.</p>
  </li>
  <li>
    <p>Run integration tests using <code class="highlighter-rouge">mvn clean verify</code></p>
  </li>
  <li>
    <p>Prepare the release which will verify that all tests pass: <code class="highlighter-rouge">mvn release:prepare</code></p>
  </li>
  <li>Perform the release: <code class="highlighter-rouge">mvn release:perform</code>
    <ul>
      <li>This step will create a staging repository viewable only to you when login to https://oss.sonatype.org/#stagingRepositories</li>
      <li>When <code class="highlighter-rouge">release:perform</code> finishes, you will need to close the staging repository to make it viewable to anyone at https://oss.sonatype.org/content/repositories/iofluo-REPO_ID</li>
    </ul>
  </li>
  <li>
    <p>Create an RC tag (i.e <code class="highlighter-rouge">&lt;version#&gt;-&lt;rc#&gt;</code>) from the tag created by the release plugin (a branch could work instead of a tag but the point is to remove the release tag because the codebase has not been released yet). This new branch/tag should have the non-snapshot version in the poms.  The RC tag can be pushed to a fork for others to view.</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Creates 1.0.0-beta-1-RC1 from 1.0.0-beta-1 </span>
git tag 1.0.0-beta-1-RC1 1.0.0-beta-1
<span class="c"># Delete 1.0.0-beta-1</span>
git tag -d 1.0.0-beta-1
<span class="c"># Push RC tag to fork</span>
git push origin 1.0.0-beta-1-RC1
</code></pre>
    </div>
  </li>
  <li>
    <p>The artifacts will be staged in nexus OSS. Send a message to the devs to let them know a release is staged.</p>
  </li>
  <li>Give enough time (Apache recommends 72 hours) for everyone to check out the distribution tarball from Sonatype OSS and verify signatures, hashes, functional tests, etc… Sonatype OSS does have it’s own validation of the artifacts which includes verifying a valid GPG signature, though I do not believe it verifies that it belonged to a trusted committer so that’ll need to be done by other committers.</li>
</ol>

<p>When consensus has been reached on a release candidate, follow the steps below to complete the release using the chosen RC:</p>

<ol>
  <li>
    <p>Merge your RC branch into master and push those commits upstream.  Afterwards, you can delete your RC branch.</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code>git checkout master
git merge 1.0.0-beta-RC
git push upstream master
git branch -d 1.0-0-beta-RC
</code></pre>
    </div>
  </li>
  <li>
    <p><a href="http://central.sonatype.org/pages/releasing-the-deployment.html">Release the artifacts</a> in Sonatype OSS so that they get published in Maven Central.  You can drop any staging repos for RCs that were not chosen.</p>
  </li>
  <li>
    <p>Create a signed tag for the release from the chosen RC tag and push to upstream repo:</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Create signed tag from RC2 tag.</span>
<span class="c"># You may need to use -u &lt;key-id&gt; to specify GPG key</span>
git tag -s 1.0.0-beta-1 1.0.0-beta-1-RC2
<span class="c"># Push signed tag to upstream repo</span>
git push upstream 1.0.0-beta-1
</code></pre>
    </div>
  </li>
  <li>
    <p>Attach Fluo tarball to GitHub release page.</p>
  </li>
  <li>
    <p>Remove all RC tags</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Remove tag locally</span>
git tag -d 1.0.0-beta-1-RC1
<span class="c"># Remove tag on fork</span>
git push --delete origin 1.0.0-beta-1-RC1
</code></pre>
    </div>
  </li>
  <li>
    <p>View the <a href="https://github.com/apache/incubator-fluo-website/blob/master/README.md">website README</a> for instructions on how to generate Javadocs and documentation using the released tag.  Submit PR to the website repo to publish.</p>
  </li>
  <li>
    <p>Send an email to <code class="highlighter-rouge">dev@fluo.incubator.apache.org</code> announcing new release.</p>
  </li>
</ol>


  </article>

</div>

          </div>
      </div>
      <hr>
      <div class="row footer">
        <div class="col-sm-12 text-center">
          <div class="center-block">
          <a href="https://apache.org"><img src="/resources/feather.png" alt="Apache"></a>
          Copyright &copy; 2016 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache&nbsp;License,&nbsp;Version&nbsp;2.0</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
